{% if qcm %}
<script src="{{ url_for('static', filename='javascript/sort_table.js') }}">
</script>
<div class="question-answers">
    <table class="center colored-background" style="border: none; outline: none">
        <tr>
            <td class="no-border">
                Numero
            </td>
            <td class="no-border bold">
                {{ qcm.id }}
            </td>
        </tr>
        <tr>
            <td class="no-border">
                Titre
            </td>
            <td class="no-border bold">
                {{ qcm.title|safe }}
            </td>
        </tr>
        <tr>
            <td class="no-border">
                Création
            </td>
            <td class="no-border bold">
                {{ qcm.datetime_formated() }}
            </td>
        </tr>
        <tr>
            <td class="no-border">
                Questions
            </td>
            <td class="no-border bold">
                {{ qcm.question_count }}
            </td>
        </tr>
        <tr>
            <td class="no-border">
                Réponses
            </td>
            <td class="no-border bold">
                {{ qcm.count_works() }}
            </td>
        </tr>
    </table>
    <div class="spacediv">
    </div>
    <div class="spacediv">
    </div>
    <div class="spacediv">
    </div>
    <div class="spacediv">
    </div>
    <div style="text-align: center;">
        <button>
            <a href="{{ url_for('preview', id_qcm=qcm.id) }}">
                Voir le QCM
            </a>
        </button>
        <button>
            <a href="{{ url_for('remove', id_qcm=qcm.id) }}">
                Supprimer le QCM
            </a>
        </button>
        {% if qcm.has_works() %}
        <button>
            <a href="{{ url_for('export', id_qcm=qcm.id) }}">
                Exporter en CSV
            </a>
        </button>
        {% endif %}
        <button>
            <a href="{{ url_for('toggle_open', id_qcm=qcm.id) }}">
                {% if qcm.is_open %}
                Fermer
                {% else %}
                Ouvrir
                {% endif %}
            </a>
        </button>
    </div>
</div>
{% if qcm.has_works() %}
<div class="question-answers">
    <h3>
        Résultats enregistrés
    </h3>
    <table class="center colored-background" id="marks-table">
        <tr>
            <th onclick="sortTable(0)" scope="col">
                Nom
            </th>
            <th onclick="sortTable(1)" scope="col">
                Adresse
            </th>
            <th onclick="sortTable(2)" scope="col" class="text-center">
                Points
            </th>
            <th onclick="sortTable(3)" scope="col">
                Horaire
            </th>
        </tr>
        {% for index, work in enumerate(qcm.works) %}
        <tr onclick=window.location="{{ url_for('work', id_qcm=qcm.id, index=index) }}" ; style='cursor: pointer;'>
            <td scope="row">
                {{ work.student.name|safe }}
            </td>
            <td scope="row">
                {{ work.student.address|safe }}
            </td>
            <td class="text-center">
                {{ work.points }}
            </td>
            <td>
                {{ work.datetime_formated() }}
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endif %}
{% endif %}
