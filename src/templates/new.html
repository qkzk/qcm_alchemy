{% extends 'base.html' %}
{% block head %}
{{ super() }}
<title>New</title>
{% endblock %}

{% block content %}
<div class="part">

    <div class="text-center question-answers">
        <h2 class="part-title">
            Nouveau QCM
        </h2>
        <form action="{{ url_for('new') }}" method="post" enctype=multipart/form-data>
            {{ form.csrf_token }}
            {{ form.source.label }}
            <br />
            <p id="chosen-file">
            </p>
            <p>
                {{ form.source(accept='.md', style='visibility:hidden') }}
            </p>
            <button type=submit style="visibility:hidden" id="submit" class="btn">
                Envoyer
            </button>
            {% if form.source.errors %}
                <ul class="errors">
                    {% for error in form.source.errors %}
                        <li>
                            {{ error }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </form>
    </div>

    {% if data %}
        {% if 'qcm_id' in data %}
            <div class="text-center question-answers">
                <h3>
                    Transmettez ce numéro à vos élèves :
                    <div class="spacediv"></div>
                        <h1>
                            {{ data["qcm_id"] }}
                        </h1>
                    <div class="spacediv"></div>
                    <div class="spacediv"></div>
                </h3>
                <h2>
                    <a href={{ url_for('preview', id_qcm=data['qcm_id']) }}>
                        Visualiser votre QCM
                    </a>
                </h2>
            </div>
        {% else %}
            <div class="part">
                <div class="question-answers">
                    {% for k, v in data.items() %}
                    <p>
                        {{ k }} 
                    </p>
                    <div style="margin: 0;">
                        <pre class="pre-error">
                            {{ v }}
                        </pre>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endif %}
</div>



<script id="display-button" src="{{ url_for('static', filename='javascript/display_upload_button.js') }}">
</script>

{% endblock %}
