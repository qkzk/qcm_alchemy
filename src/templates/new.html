{% extends 'base.html' %}
{% block head %}
{{ super() }}
{% endblock %}

{% block content %}
<div class="part">

    <div class="text-center question-answers">
        <h2 class="part-title">
            Nouveau QCM
        </h2>
        <form action="{{ request.path }}" method="post" enctype=multipart/form-data>
            <label for="source" id="label">
                Cliquez pour choisir un fichier
            </label>

            <input type="file" name="source" id="source" accept=".md" style="visibility:hidden">

            <br />
            
            <button type=submit style="visibility:hidden" id="submit" class="btn">
                Envoyer
            </button>
        </form>
    </div>

    {% if data %}
        {% if 'qcm_id' in data %}
            <h3>
                Donnez le numéro à vos élèves pour qu'ils puissent démarrer le QCM :
                <div class="spacediv"></div>
                {{ data["qcm_id"] }}
                <div class="spacediv"></div>
                <div class="spacediv"></div>
                <div class="spacediv"></div>
                Conservez ce mot de passe pour consulter et exporter vos notes :
                <div class="spacediv"></div>
                {{ data["password"] }}
            </h3>

        {% else %}
            <div>
                {% for k, v in data.items() %}
                <h3>
                    {{ k }} - {{ v }}
                </h3>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}
</div>



<script>
    /// Make the upload button visible when a file is selected
    source = document.getElementById('source');
    label = document.getElementById('label');
    submit = document.getElementById('submit');
    source.onchange = function () {
      label.textContent = 'Fichier choisi: ' + this.value;
      submit.style.visibility = "visible";
    };
</script>

{% endblock %}
